(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{145:function(e,t,r){"use strict";r.r(t);r(158),r(34),r(149);var a=r(7),n=r.n(a),s=r(0),c=r.n(s),l=(r(143),r(160)),i=r.n(l),o=r(150),u=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"high scores"),e.highScoreArray.length>0?c.a.createElement("div",{className:"top3"},e.highScoreArray.map(function(e,t){return c.a.createElement("div",{className:"high-score",key:"high-score-"+t},c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,"Score: "),c.a.createElement("span",null,e.score)),c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,"Correct: "),c.a.createElement("span",null,e.correctAnswers)),c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,e.name)))})):c.a.createElement("h2",null,"Not enough scores yet"),c.a.createElement(o.a,{className:"btn",to:"/"},"New Game"))},m=function(e){var t=e.timer,r=e.questions,a=e.currentAnswers,n=function(t){return e.handleClickAnswer(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"timer",value:t},t),c.a.createElement("h2",null,unescape(r[e.questionCounter].question)),a&&a.map(function(e,t){return c.a.createElement("li",{value:t,className:"choice-container",key:"li-answer-"+t,onClick:function(e){return n(e)}},c.a.createElement("p",{className:"choice-prefix",value:t,onClick:function(e){return n(e)}},String.fromCharCode(65+t)),c.a.createElement("p",{value:t,className:"choice-text",onClick:function(e){return n(e)}},unescape(e)))}))},h=function(e){var t=function(t){return e.handleClickNavigate(t)};return c.a.createElement("div",null,c.a.createElement("h2",{style:{maxWidth:"100%"}},"Your Result"),c.a.createElement("div",{className:"score"},c.a.createElement("span",null,"Score: "),e.userResults[e.userResults.length-1].score),c.a.createElement("div",{className:"score"},c.a.createElement("span",null,"Correct Answers: "),e.userResults[e.userResults.length-1].correctAnswers),c.a.createElement("div",{className:"btn ",value:"NewGame",onClick:function(e){return t(e)}},"New Game"),c.a.createElement("div",{className:"btn ",value:"HighScore",onClick:function(e){return t(e)}},"High Scores"))},f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).state={name:"",questions:[],score:0,correctAnswers:0,timer:30,userResults:[],questionCounter:0,answerIndex:0,result:!1,highScores:!1,highScoreArray:[],error:""},t.handleClickAnswer=function(e){var r=t.state.score,a=t.state.correctAnswers;if(e.target.value!==t.state.answerIndex&&e.target.parentElement.parentElement.value!==t.state.answerIndex&&e.target.parentElement.value!==t.state.answerIndex||(r+=50+t.state.timer,a+=1),t.state.questionCounter<9){var n=t.state.questionCounter+1;t.setState({score:r,correctAnswers:a,questionCounter:n,timer:30},function(){return t.shuffleCorrectAnswer()})}else{var s={name:t.state.name,score:r,correctAnswers:t.state.correctAnswers},c=[].concat(t.state.userResults,[Object.assign({},s)]);t.setState({score:r,result:!0,userResults:c}),localStorage.setItem("userResults",JSON.stringify(c)),clearInterval(t.intervalRef)}},t.nextQuestion=function(){if(t.state.questionCounter<9){var e=t.state.questionCounter+1;t.setState({questionCounter:e,timer:30},function(){return t.shuffleCorrectAnswer()})}else{var r={name:"",score:t.state.score,correctAnswers:t.state.correctAnswers},a=[].concat(t.state.userResults,[Object.assign({},r)]);t.setState({result:!0,userResults:a}),localStorage.setItem("userResults",JSON.stringify(a)),clearInterval(t.intervalRef)}},t.startTimer=function(){t.intervalRef=setInterval(function(){var e=t.state.timer-1;e<1&&(e=30,t.nextQuestion()),t.setState({timer:e})},1e3)},t.shuffleCorrectAnswer=function(){var e=[].concat(t.state.questions[t.state.questionCounter].incorrect_answers),r=Math.round(Math.random()*e.length);e.splice(r,0,t.state.questions[t.state.questionCounter].correct_answer),t.setState({currentAnswers:e,answerIndex:r})},t.handleClickNavigate=function(e){if("New Game"===e.target.innerText)t.props.navigate(Object(o.c)("/"));else if("High Scores"===e.target.innerText){var r=t.state.userResults.sort(function(e,t){return t.score-e.score});r.splice(10,r.length),t.setState({result:!1,highScores:!0,highScoreArray:r})}},t}n()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;i.a.get("https://opentdb.com/api.php?amount=10&encode=url3986").then(function(t){for(var r in e.state)if(localStorage.hasOwnProperty(r)){var a=localStorage.getItem(r);try{var n;a=JSON.parse(a),e.setState(((n={})[r]=a,n))}catch(c){var s;e.setState(((s={})[r]=a,s))}}e.setState({questions:t.data.results,name:e.props.location.state.name}),e.shuffleCorrectAnswer(),e.startTimer()}).catch(function(t){console.log(t),e.setState({error:t})})},r.render=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},this.state.error?c.a.createElement("div",{id:"home",className:"flex-center flex-column"},c.a.createElement("h1",null,c.a.createElement("span",{role:"img","aria-label":"beer-emoji"},"🍺")," ","Pub Quiz"," ",c.a.createElement("span",{role:"img","aria-label":"beer-emoji"},"🍺")),c.a.createElement("h1",null,c.a.createElement("span",{role:"img","aria-label":"beer-emoji"},"🐒"),"API on break"),c.a.createElement(o.a,{type:"submit",className:"btn",to:"/"},"Back")):"",this.state.questions[this.state.questionCounter]&&c.a.createElement("div",{id:"game",className:"flex-center flex-column"},this.state.result&&!0===this.state.result?c.a.createElement(h,{userResults:this.state.userResults,handleClickNavigate:this.handleClickNavigate}):c.a.createElement(c.a.Fragment,null,this.state.highScores&&!0===this.state.highScores?c.a.createElement(u,{highScoreArray:this.state.highScoreArray}):c.a.createElement(m,{timer:this.state.timer,questions:this.state.questions,questionCounter:this.state.questionCounter,currentAnswers:this.state.currentAnswers,handleClickAnswer:this.handleClickAnswer})))))},t}(s.Component);t.default=f},148:function(e,t,r){var a;e.exports=(a=r(152))&&a.default||a},150:function(e,t,r){"use strict";var a=r(0),n=r.n(a),s=r(4),c=r.n(s),l=r(33),i=r.n(l);r.d(t,"a",function(){return i.a}),r.d(t,"c",function(){return l.withPrefix}),r.d(t,"b",function(){return l.navigate});r(148),n.a.createContext({});c.a.object,c.a.string.isRequired,c.a.func,c.a.func},152:function(e,t,r){"use strict";r.r(t);r(34);var a=r(0),n=r.n(a),s=r(4),c=r.n(s),l=r(55),i=r(2),o=function(e){var t=e.location,r=i.default.getResourcesForPathnameSync(t.pathname);return n.a.createElement(l.a,Object.assign({location:t,pageResources:r},r.json))};o.propTypes={location:c.a.shape({pathname:c.a.string.isRequired}).isRequired},t.default=o}}]);
//# sourceMappingURL=component---src-pages-game-js-f344971df96ae2fb2c6a.js.map