(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{145:function(e,t,n){"use strict";n.r(t);n(158),n(34),n(149);var r=n(7),a=n.n(r),s=n(0),c=n.n(s),o=(n(143),n(160)),i=n.n(o),l=n(151),u=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"high scores"),e.highScoreArray.length>0?c.a.createElement("div",{className:"top3"},e.highScoreArray.map(function(e,t){return c.a.createElement("div",{className:"high-score",key:"high-score-"+t},c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,"Score: "),c.a.createElement("span",null,e.score)),c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,"Correct: "),c.a.createElement("span",null,e.correctAnswers)),c.a.createElement("div",{className:"high-score-item"},c.a.createElement("span",null,e.name)))})):c.a.createElement("h2",null,"Not enough scores yet"),c.a.createElement(l.a,{className:"btn",to:"/"},"New Game"))},m=function(e){var t=function(t){return e.handleClickAnswer(t)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"timer",value:e.timer},e.timer),c.a.createElement("h2",null,unescape(e.questions[e.questionCounter].question)),e.currentAnswers&&e.currentAnswers.map(function(e,n){return c.a.createElement("li",{value:n,className:"choice-container",key:"li-answer-"+n,onClick:function(e){return t(e)}},c.a.createElement("p",{className:"choice-prefix",value:n,onClick:function(e){return t(e)}},String.fromCharCode(65+n)),c.a.createElement("p",{value:n,className:"choice-text",onClick:function(e){return t(e)}},unescape(e)))}))},h=function(e){var t=function(t){return e.handleClickNavigate(t)};return c.a.createElement("div",null,c.a.createElement("h2",{style:{maxWidth:"100%"}},"Your Result"),c.a.createElement("div",{className:"score"},c.a.createElement("span",null,"Score: "),e.userResults[e.userResults.length-1].score),c.a.createElement("div",{className:"score"},c.a.createElement("span",null,"Correct Answers: "),e.userResults[e.userResults.length-1].correctAnswers),c.a.createElement("div",{className:"btn ",value:"NewGame",onClick:function(e){return t(e)}},"New Game"),c.a.createElement("div",{className:"btn ",value:"HighScore",onClick:function(e){return t(e)}},"High Scores"))},f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={name:"",questions:[],score:0,correctAnswers:0,timer:30,userResults:[],questionCounter:0,answerIndex:0,result:!1,highScores:!1,highScoreArray:[]},t.handleClickAnswer=function(e){var n=t.state.score,r=t.state.correctAnswers;if(e.target.value!==t.state.answerIndex&&e.target.parentElement.parentElement.value!==t.state.answerIndex&&e.target.parentElement.value!==t.state.answerIndex||(n+=50+t.state.timer,r+=1),t.state.questionCounter<9){var a=t.state.questionCounter+1;t.setState({score:n,correctAnswers:r,questionCounter:a,timer:30},function(){return t.shuffleCorrectAnswer()})}else{var s={name:t.state.name,score:n,correctAnswers:t.state.correctAnswers},c=[].concat(t.state.userResults,[Object.assign({},s)]);t.setState({score:n,result:!0,userResults:c}),localStorage.setItem("userResults",JSON.stringify(c)),clearInterval(t.intervalRef)}},t.nextQuestion=function(){if(t.state.questionCounter<9){var e=t.state.questionCounter+1;t.setState({questionCounter:e,timer:30},function(){return t.shuffleCorrectAnswer()})}else{var n={name:"",score:t.state.score,correctAnswers:t.state.correctAnswers},r=[].concat(t.state.userResults,[Object.assign({},n)]);t.setState({result:!0,userResults:r}),localStorage.setItem("userResults",JSON.stringify(r)),clearInterval(t.intervalRef)}},t.startTimer=function(){t.intervalRef=setInterval(function(){var e=t.state.timer-1;e<1&&(e=30,t.nextQuestion()),t.setState({timer:e})},1e3)},t.shuffleCorrectAnswer=function(){var e=[].concat(t.state.questions[t.state.questionCounter].incorrect_answers),n=Math.round(Math.random()*e.length);e.splice(n,0,t.state.questions[t.state.questionCounter].correct_answer),t.setState({currentAnswers:e,answerIndex:n})},t.handleClickNavigate=function(e){if("New Game"===e.target.innerText)t.props.navigate("/");else if("High Scores"===e.target.innerText){var n=t.state.userResults.sort(function(e,t){return t.score-e.score});n.splice(10,n.length),t.setState({result:!1,highScores:!0,highScoreArray:n})}},t}a()(t,e);var n=t.prototype;return n.componentWillMount=function(){var e=this;i.a.get("https://opentdb.com/api.php?amount=10&encode=url3986").then(function(t){for(var n in e.state)if(localStorage.hasOwnProperty(n)){var r=localStorage.getItem(n);try{var a;r=JSON.parse(r),e.setState(((a={})[n]=r,a))}catch(c){var s;e.setState(((s={})[n]=r,s))}}e.setState({questions:t.data.results,name:e.props.location.state.name}),e.shuffleCorrectAnswer(),e.startTimer()}).catch(function(e){console.log(e)})},n.render=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},this.state.questions[this.state.questionCounter]&&c.a.createElement("div",{id:"game",className:"flex-center flex-column"},this.state.result&&!0===this.state.result?c.a.createElement(h,{userResults:this.state.userResults,handleClickNavigate:this.handleClickNavigate}):c.a.createElement(c.a.Fragment,null,this.state.highScores&&!0===this.state.highScores?c.a.createElement(u,{highScoreArray:this.state.highScoreArray}):c.a.createElement(m,{timer:this.state.timer,questions:this.state.questions,questionCounter:this.state.questionCounter,currentAnswers:this.state.currentAnswers,handleClickAnswer:this.handleClickAnswer})))))},t}(s.Component);t.default=f},148:function(e,t,n){var r;e.exports=(r=n(152))&&r.default||r},151:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(4),c=n.n(s),o=n(33),i=n.n(o);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return o.navigate});n(148),a.a.createContext({});c.a.object,c.a.string.isRequired,c.a.func,c.a.func},152:function(e,t,n){"use strict";n.r(t);n(34);var r=n(0),a=n.n(r),s=n(4),c=n.n(s),o=n(55),i=n(2),l=function(e){var t=e.location,n=i.default.getResourcesForPathnameSync(t.pathname);return a.a.createElement(o.a,Object.assign({location:t,pageResources:n},n.json))};l.propTypes={location:c.a.shape({pathname:c.a.string.isRequired}).isRequired},t.default=l}}]);
//# sourceMappingURL=component---src-pages-game-js-6411233efb5d0179bf8f.js.map